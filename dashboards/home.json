{"dashboard":{"annotations":{"list":[{"$$hashKey":"object:7","builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":null,"description":"","gridPos":{"h":1,"w":12,"x":0,"y":0},"id":1626635244,"options":{"content":"","mode":"markdown"},"pluginVersion":"8.2.1","transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":6,"w":12,"x":12,"y":0},"id":8,"links":[],"options":{"content":"\u003cstyle type=\"text/css\"\u003e\r\np.markdown-html.panel-text-content {\r\noverflow: hidden;\r\n}\r\np.markdown-html.panel-text-content iframe {\r\nheight:235px\r\n}\r\n\u003c/style\u003e\r\n\u003cscript type=\"text/javascript\"\u003e\r\nvar weatherProperties = 'lat=47.040468\u0026lon=8.314699\u0026color=#FFFFFF\u0026text-color=#FFFFFF\u0026font=Verdana\u0026font-size=20px\u0026units=si';\r\n\r\n// initial load\r\ndocument.getElementById('embedweather').src = 'http://forecast.io/embed/?ts=' + (Date.now()) + '#' + weatherProperties;\r\n\r\n// refresh\r\nvar weatherRefresh = setInterval(function() { document.getElementById('embedweather').src = 'http://forecast.io/embed/?ts=' + (Date.now()) + '#' + weatherProperties; }, 1800000);\r\n\r\n\u003c/script\u003e\r\n\u003ciframe id=\"embedweather\" height=\"235px\" src=\"\" style=\"margin: 0; padding: 0; border: none; width:100%; position:relative; top:-50px; overflow:hidden; margin-left: -20px;\"\u003e\u003c/iframe\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"},{"bgColor":"#8AB8FF","clockType":"24 hour","countdownSettings":{"customFormat":null,"endCountdownTime":"2019-07-01T09:46:00.000Z","endText":"00:00:00"},"datasource":null,"dateSettings":{"dateFormat":"DD.MM.YYYY","fontSize":"22px","fontWeight":"normal","showDate":true},"gridPos":{"h":2,"w":12,"x":0,"y":1},"id":12,"links":[],"mode":"time","options":{"bgColor":"rgb(0, 0, 0)","clockType":"24 hour","countdownSettings":{"endCountdownTime":"2020-11-28T20:03:14+01:00","endText":"00:00:00"},"dateSettings":{"dateFormat":"YYYY-MM-DD","fontSize":"20px","fontWeight":"normal","locale":"","showDate":false},"mode":"time","refresh":"sec","timeSettings":{"fontSize":"72px","fontWeight":"bold"},"timezone":"","timezoneSettings":{"fontSize":"12px","fontWeight":"normal","showTimezone":false,"zoneFormat":"offsetAbbv"}},"pluginVersion":"1.2.0","refreshSettings":{"syncWithDashboard":false},"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"timeFrom":null,"timeSettings":{"customFormat":"HH:mm:ss","fontSize":"70px","fontWeight":"bold"},"timeShift":null,"timezone":"Europe/Zurich","timezoneSettings":{"fontSize":"24px","fontWeight":"normal","showTimezone":false,"zoneFormat":"offsetAbbv"},"transparent":true,"type":"grafana-clock-panel"},{"datasource":null,"gridPos":{"h":2,"w":12,"x":0,"y":3},"id":2,"links":[],"options":{"content":"\u003chead\u003e\u003clink rel='stylesheet' type='text/css' href='../public/style.css'\u003e\u003c/head\u003e\r\n\r\n\u003ccenter\u003e\r\n\t\u003cdiv\u003e\u003cspan id=\"status_output\"\u003e#\u003c/span\u003e\u003c/div\u003e\r\n\t\u003cdiv\u003eLast Message: \u003cfont color='hotpink'\u003e\u003cspan id=\"name_output\"\u003e\u003c/span\u003e # \u003cspan id=\"request_output\"\u003e\u003c/span\u003e\u003c/font\u003e\u003c/div\u003e\r\n\t\u003c!--- DEBUG \u003cdiv\u003eTopic: \u003cspan id=\"topic_output\"\u003e#\u003c/span\u003e\u003c/div\u003e ---\u003e\r\n\u003c/center\u003e\r\n\r\n\u003cscript\u003e\r\n\t\r\n\tvar mqtt;\r\n\tvar reconnectTimeout = 5000;\r\n\tvar port = 1884;\r\n\tvar useTLS = false;\r\n\tvar user = \"mqtt_grafana\";\r\n\tvar pwd = \"grafana@mosquitto\";\r\n\tvar cleansession = true;\r\n\tvar path = \"\";\r\n\tvar buttons = $('[type=button]');\r\n\tvar host = location.hostname;\r\n\t\r\n\tconsole.log(host);\r\n\t\r\n\tbuttons.prop('disabled', true);\r\n   \r\n\tfunction MQTTconnect() {\r\n\t\tif (typeof path == \"undefined\") {\r\n\t\t\tpath = '/mqtt';\r\n\t\t}\r\n\t\tmqtt = new Paho.MQTT.Client(\r\n\t\t\thost,\r\n\t\t\tport,\r\n\t\t\tpath,\r\n\t\t\t\"web_grafanaPanel\" + parseInt(Math.random() * 10000, 10)\r\n\t\t);\r\n\t\tvar options = {\r\n\t\t\ttimeout: 3,\r\n\t\t\tuseSSL: useTLS,\r\n\t\t\tcleanSession: cleansession,\r\n\t\t\tonSuccess: onConnect,\r\n\t\t\tonFailure: function (message) {\r\n\t\t\t\t$('#status_output').html(\"Connection failed: \" + message.errorMessage + \"Retrying\");\r\n\t\t\t\tsetTimeout(MQTTconnect, reconnectTimeout);\r\n\t\t\t}\r\n\t\t};\r\n\t\tmqtt.onConnectionLost = onConnectionLost;\r\n\t\tmqtt.onMessageArrived = onMessageArrived;\r\n\t\tif (user != null) {\r\n\t\t\toptions.userName = user;\r\n\t\t\toptions.password = pwd;\r\n\t\t}\r\n\t\tconsole.log(\"Host=\" + host + \", port=\" + port + \", path=\" + path + \" TLS = \" + useTLS + \" username=\" + user + \" password=\" + pwd);\r\n\t\tmqtt.connect(options);\r\n\t}\r\n\t\r\n\tfunction onConnect() {\r\n\t\t$('#status_output').html('Connected to: ' + host + ':' + port + path);\r\n\t\t// Connection succeeded; subscribe to our topic(s)\r\n\t\tbuttons.prop('disabled', false);\r\n\t}\r\n\r\n\tfunction onConnectionLost(response) {\r\n\t\tsetTimeout(MQTTconnect, reconnectTimeout);\r\n\t\t$('#status_output').html(\"connection lost: \" + response.errorMessage + \". Reconnecting\");\r\n\t\tbuttons.prop('disabled', true);\r\n\t};\r\n\r\n\tfunction onMessageArrived(message) {\r\n\t\tvar payload = message.payloadString;\r\n\t\t$('#request_output').html(payload);\r\n\t};\r\n\t\r\n\tvar publish = function (payload, input_topic, output_topic, device_name, qos) {\r\n\t\tconsole.log('Sending: ' + JSON.stringify(payload));\r\n\t\t\r\n\t\tmqtt.subscribe(output_topic, {\r\n\t\t  qos: 2\r\n\t\t});\r\n\t\t\r\n\t\t$('#status_output').html('Connected to ' + host + ':' + port + path);\r\n\t\t$('#topic_output').html(input_topic);\r\n\t\t$('#name_output').html(device_name);\r\n\t\t\r\n\t\tvar message = new Paho.MQTT.Message(payload);\r\n\t\tmessage.destinationName = input_topic;\r\n\t\tmessage.qos = qos;\r\n\t\tmqtt.send(message);\r\n\t\t\r\n\t\t\tsetTimeout(() =\u003e { mqtt.unsubscribe(output_topic); }, 5000);\r\n\t\t\r\n\t}\r\n\r\n\tif (typeof Paho === 'undefined') {\r\n\t\tvar script = document.createElement('script');\r\n\t\tdocument.body.appendChild(script);\r\n\t\tscript.onload = function () {\r\n\t\t\tMQTTconnect();\r\n\t\t}\r\n\t\tscript.src = '../public/mqttws31.min.js';\r\n\t} else {\r\n\t   MQTTconnect();\r\n\t}\r\n\u003c/script\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":0,"y":5},"id":1575714476,"links":[],"options":{"content":"\u003cbutton class=\"home\" onclick=\"publish('toggle','shellies/shelly-dummy/relay/0/command','shellies/shelly-dummy/relay/0','Switch',2);\"\u003e\r\n\t\u003ctable class=\"home\"\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003ctd class=\"buttonpic\"\u003e\u003cimg src=\"../public/img/tv.png\" /\u003e\u003c/td\u003e\r\n\t\t\t\u003ctd class=\"buttondesc\"\u003eSwitch\u003c/td\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/table\u003e\r\n\u003c/button\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":6,"y":5},"id":1588962426,"links":[],"options":{"content":"\u003cbutton class=\"home\" onclick=\"publish('toggle','shellies/shelly-dummy/relay/0/command','shellies/shelly-dummy/relay/0','Switch',2);\"\u003e\r\n\t\u003ctable class=\"home\"\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003ctd class=\"buttonpic\"\u003e\u003cimg src=\"../public/img/lampe.png\" /\u003e\u003c/td\u003e\r\n\t\t\t\u003ctd class=\"buttondesc\"\u003eSwitch\u003c/td\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/table\u003e\r\n\u003c/button\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":1,"displayName":"","mappings":[],"max":40,"min":10,"thresholds":{"mode":"absolute","steps":[{"color":"blue","value":null},{"color":"green","value":20},{"color":"#EAB839","value":25},{"color":"orange","value":30},{"color":"red","value":35}]},"unit":"celsius"},"overrides":[]},"gridPos":{"h":5,"w":6,"x":12,"y":6},"id":17,"links":[],"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.2.1","targets":[{"alias":"","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"temperature","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"location","operator":"=","value":"shellyht-B895A5"}]}],"timeFrom":null,"timeShift":null,"transparent":true,"type":"gauge"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":1,"displayName":"","mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"orange","value":20},{"color":"#6ED0E0","value":40},{"color":"orange","value":60},{"color":"red","value":80}]},"unit":"humidity"},"overrides":[]},"gridPos":{"h":5,"w":6,"x":18,"y":6},"id":19,"links":[],"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.2.1","targets":[{"alias":"Feuchte","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"humidity","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"location","operator":"=","value":"shellyht-B895A5"}]}],"timeFrom":null,"timeShift":null,"transparent":true,"type":"gauge"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":0,"y":9},"id":1588962423,"links":[],"options":{"content":"\u003cbutton class=\"home\" onclick=\"publish('toggle','shellies/shelly-dummy/relay/0/command','shellies/shelly-dummy/relay/0','Switch',2);\"\u003e\r\n\t\u003ctable class=\"home\"\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003ctd class=\"buttonpic\"\u003e\u003cimg src=\"../public/img/computer.png\" /\u003e\u003c/td\u003e\r\n\t\t\t\u003ctd class=\"buttondesc\"\u003eSwitch\u003c/td\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/table\u003e\r\n\u003c/button\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":6,"y":9},"id":1588962425,"links":[],"options":{"content":"\u003cbutton class=\"home\" onclick=\"publish('toggle','shellies/shelly-dummy/relay/0/command','shellies/shelly-dummy/relay/0','Switch',2);\"\u003e\r\n\t\u003ctable class=\"home\"\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003ctd class=\"buttonpic\"\u003e\u003cimg src=\"../public/img/onoff.png\" /\u003e\u003c/td\u003e\r\n\t\t\t\u003ctd class=\"buttondesc\"\u003eSwitch\u003c/td\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/table\u003e\r\n\u003c/button\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"},{"datasource":null,"description":"","gridPos":{"h":1,"w":12,"x":12,"y":11},"id":1626635245,"options":{"content":"","mode":"markdown"},"pluginVersion":"8.2.1","transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":12,"y":12},"id":1626635240,"options":{"content":"\u003ccenter\u003e\u003cfont class=\"header\"\u003eSonnenschutz\u003c/font\u003e\u003c/center\u003e\n\u003cp\u003e\n\n\u003cdiv class=\"slider\"\u003e\n\n\t\u003cfont class=\"home\"\u003e▼ \u0026nbsp;\u003c/font\u003e\n\t\u003cinput id=\"shellyswitch25-BCDDC277633D\" type=\"range\" min=\"23\" max=\"100\" style=\"white-space: nowrap\" onchange=\"update_value_shellyswitch25_BCDDC277633D()\" /\u003e\n\t\u003cfont class=\"home\"\u003e\u0026nbsp; ▲\u003c/font\u003e\n\n\u003c/div\u003e\n\n\u003cscript\u003e\n\nvar update_value_shellyswitch25_BCDDC277633D = function() { \n\n\tvar shellyswitch25_BCDDC277633D_value = document.getElementById(\"shellyswitch25-BCDDC277633D\").value; \n\tpublish(shellyswitch25_BCDDC277633D_value, 'shellies/shellyswitch25-BCDDC277633D/roller/0/command/pos', 'shellies/shellyswitch25-BCDDC277633D/roller/0/command/pos', 'Sonnenschutz Links', 2); \n\n}\n\n\u003c/script\u003e","mode":"html"},"pluginVersion":"8.2.1","transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":18,"y":12},"id":1626635241,"options":{"content":"\u003ccenter\u003e\u003cfont class=\"header\"\u003eSonnenschutz\u003c/font\u003e\u003c/center\u003e\n\u003cp\u003e\n\n\u003cdiv class=\"slider\"\u003e\n\n\t\u003cfont class=\"home\"\u003e▼ \u0026nbsp;\u003c/font\u003e\n\t\u003cinput id=\"shellyswitch25-BCDDC277633D\" type=\"range\" min=\"23\" max=\"100\" style=\"white-space: nowrap\" onchange=\"update_value_shellyswitch25_BCDDC277633D()\" /\u003e\n\t\u003cfont class=\"home\"\u003e\u0026nbsp; ▲\u003c/font\u003e\n\n\u003c/div\u003e\n\n\u003cscript\u003e\n\nvar update_value_shellyswitch25_BCDDC277633D = function() { \n\n\tvar shellyswitch25_BCDDC277633D_value = document.getElementById(\"shellyswitch25-BCDDC277633D\").value; \n\tpublish(shellyswitch25_BCDDC277633D_value, 'shellies/shellyswitch25-BCDDC277633D/roller/0/command/pos', 'shellies/shellyswitch25-BCDDC277633D/roller/0/command/pos', 'Sonnenschutz Links', 2); \n\n}\n\n\u003c/script\u003e","mode":"html"},"pluginVersion":"8.2.1","transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":0,"y":13},"id":1588801196,"links":[],"options":{"content":"\u003ctable class=\"home\"\u003e\r\n\t\u003ctr style=\"height:30%\"\u003e\r\n\t\t\u003ctd class=\"shutter\"\u003e \r\n\t\t\t\u003cfont class=\"header\"\u003eStoren\u003c/font\u003e \r\n\t\t\u003c/td\u003e \r\n\t\u003c/tr\u003e \r\n\t\u003ctr style=\"height:70%\"\u003e \r\n\t\t\u003ctd class=\"shutter\"\u003e \r\n\t\t\t\u003cbutton class=\"shutter\" onclick=\"publish('0','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2);\"\u003e\r\n\t\t\t\t▲\r\n\t\t\t\u003c/button\u003e \r\n\t\t\t\u003cbutton class=\"shutter\" onclick=\"publish('100','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2);\"\u003e\r\n\t\t\t\t▼\r\n\t\t\t\u003c/button\u003e \r\n\t\t\t\u003cbutton class=\"shutter\" onclick=\"Teststoren_shutter_pressed(); \"\u003e\r\n\t\t\t\t≡\r\n\t\t\t\u003c/button\u003e \r\n\t\t\u003c/td\u003e \r\n\t\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\r\n\u003cscript\u003e \r\n\r\n\tvar Teststoren_shutter_pressed = function() { \r\n\r\n\t\tpublish('100','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2); \r\n\t\tsetTimeout(() =\u003e { publish('99','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2); }, 20000); \r\n\r\n\t}\r\n\r\n\u003c/script\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"},{"datasource":null,"gridPos":{"h":4,"w":6,"x":6,"y":13},"id":1626635242,"links":[],"options":{"content":"\u003ctable class=\"home\"\u003e\r\n\t\u003ctr style=\"height:30%\"\u003e\r\n\t\t\u003ctd class=\"shutter\"\u003e \r\n\t\t\t\u003cfont class=\"header\"\u003eStoren\u003c/font\u003e \r\n\t\t\u003c/td\u003e \r\n\t\u003c/tr\u003e \r\n\t\u003ctr style=\"height:70%\"\u003e \r\n\t\t\u003ctd class=\"shutter\"\u003e \r\n\t\t\t\u003cbutton class=\"shutter\" onclick=\"publish('0','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2);\"\u003e\r\n\t\t\t\t▲\r\n\t\t\t\u003c/button\u003e \r\n\t\t\t\u003cbutton class=\"shutter\" onclick=\"publish('100','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2);\"\u003e\r\n\t\t\t\t▼\r\n\t\t\t\u003c/button\u003e \r\n\t\t\t\u003cbutton class=\"shutter\" onclick=\"Teststoren_shutter_pressed(); \"\u003e\r\n\t\t\t\t≡\r\n\t\t\t\u003c/button\u003e \r\n\t\t\u003c/td\u003e \r\n\t\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\r\n\u003cscript\u003e \r\n\r\n\tvar Teststoren_shutter_pressed = function() { \r\n\r\n\t\tpublish('100','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2); \r\n\t\tsetTimeout(() =\u003e { publish('99','shellies/Teststoren/roller/0/command/pos','shellies/Teststoren/roller/0/pos','Teststoren',2); }, 20000); \r\n\r\n\t}\r\n\r\n\u003c/script\u003e","mode":"html"},"pluginVersion":"8.2.1","timeFrom":null,"timeShift":null,"transparent":true,"type":"text"}],"refresh":false,"schemaVersion":31,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-24h","to":"now"},"timepicker":{"hidden":true,"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Home","uid":"XieEaLmRk","version":1}}